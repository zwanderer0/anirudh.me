!function(){"use strict";var e={d:function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{ELEMENT_STYLE_CHANGE_EVENT:function(){return X},createElement:function(){return h},createElementStyle:function(){return oe},createElements:function(){return g},deleteElement:function(){return I},deleteElementStyle:function(){return se},dropElement:function(){return v},duplicateElement:function(){return _},duplicateElements:function(){return b},generateElementId:function(){return C},getAnchoredAncestorId:function(){return G},getAnchoredDescendantId:function(){return J},getContainer:function(){return o},getCurrentDocumentContainer:function(){return S},getCurrentDocumentId:function(){return T},getElementEditorSettings:function(){return i},getElementInteractions:function(){return ae},getElementLabel:function(){return R},getElementSetting:function(){return a},getElementSettings:function(){return c},getElementStyles:function(){return H},getElementType:function(){return f},getElements:function(){return q},getLinkInLinkRestriction:function(){return V},getSelectedElements:function(){return y},getWidgetsCache:function(){return p},initElementsMcp:function(){return he},isElementAnchored:function(){return B},moveElement:function(){return U},moveElements:function(){return z},playElementInteractions:function(){return me},removeElements:function(){return M},replaceElement:function(){return L},selectElement:function(){return r},shouldCreateNewLocalStyle:function(){return re},styleRerenderEvents:function(){return Z},updateElementEditorSettings:function(){return A},updateElementInteractions:function(){return de},updateElementSettings:function(){return N},updateElementStyle:function(){return ie},useElementChildren:function(){return s},useElementEditorSettings:function(){return l},useElementInteractions:function(){return ce},useElementSetting:function(){return d},useElementSettings:function(){return m},useParentElement:function(){return u},useSelectedElement:function(){return w}});var n=window.elementorV2.editorV1Adapters;function o(e){const t=window,n=t.elementor?.getContainer?.(e);return n??null}const r=e=>{try{const t=o(e);(0,n.__privateRunCommand)("document/elements/select",{container:t})}catch{}};function s(e,t){return(0,n.__privateUseListenTo)([(0,n.v1ReadyEvent)(),(0,n.commandEndEvent)("document/elements/create"),(0,n.commandEndEvent)("document/elements/delete"),(0,n.commandEndEvent)("document/elements/update"),(0,n.commandEndEvent)("document/elements/set-settings")],()=>{const n=o(e);return Object.entries(t).reduce((e,[t,o])=>{const r=n?.children?.findRecursive?.(({model:e})=>e.get("elType")===t),s=r?.children??[];return e[o]=s.filter(({model:e})=>e.get("elType")===o).map(({id:e})=>({id:e})),e},{})},[e])}function i(e){const t=o(e);return t?.model.get("editor_settings")??{}}const l=e=>(0,n.__privateUseListenTo)((0,n.windowEvent)("elementor/element/update_editor_settings"),()=>i(e),[e]),a=(e,t)=>{const n=o(e);return n?.settings?.get(t)??null},c=(e,t)=>Object.fromEntries(t.map(t=>[t,a(e,t)])),d=(e,t)=>(0,n.__privateUseListenTo)((0,n.commandEndEvent)("document/elements/set-settings"),()=>a(e,t),[e,t]),m=(e,t)=>(0,n.__privateUseListenTo)((0,n.commandEndEvent)("document/elements/set-settings"),()=>t.reduce((t,n)=>{const o=a(e,n);return null!==o&&(t[n]=o),t},{}),[e,t.join(",")]);function u(e){return(0,n.__privateUseListenTo)([(0,n.commandEndEvent)("document/elements/create")],()=>{if(!e)return null;const t=window,n=t?.elementor?.getContainer?.(e);return n?n.parent:null},[e])}function p(){const e=window;return e?.elementor?.widgetsCache||null}function f(e){if(!e)return null;const t=p(),n=t?.[e];return n?.atomic_controls&&n?.atomic_props_schema?{key:e,controls:n.atomic_controls,propsSchema:n.atomic_props_schema,dependenciesPerTargetMapping:n.dependencies_per_target_mapping??{},title:n.title,styleStates:n.atomic_style_states??[]}:null}function y(){const e=window;return(e.elementor?.selection?.getElements?.()??[]).reduce((e,t)=>{const n=t.model.get("widgetType")||t.model.get("elType");return n&&e.push({id:t.model.get("id"),type:n}),e},[])}function w(){const e=(0,n.__privateUseListenTo)([(0,n.commandEndEvent)("document/elements/select"),(0,n.commandEndEvent)("document/elements/deselect"),(0,n.commandEndEvent)("document/elements/select-all"),(0,n.commandEndEvent)("document/elements/deselect-all")],y),[t]=e,o=f(t?.type);return 1===e.length&&o?{element:t,elementType:o}:{element:null,elementType:null}}function h({containerId:e,model:t,options:r}){const s=o(e);if(!s)throw new Error(`Container with ID "${e}" not found`);return(0,n.__privateRunCommandSync)("document/elements/create",{container:s,model:t,options:{edit:!1,...r}})}var E=window.wp.i18n;function I({elementId:e,options:t={}}){const r=o(e);if(!r)throw new Error(`Element with ID "${e}" not found`);return(0,n.__privateRunCommand)("document/elements/delete",{container:r,options:t})}const g=({elements:e,title:t,subtitle:r=(0,E.__)("Item added","elementor")})=>(0,n.undoable)({do:({elements:e})=>{const t=[];return e.forEach(e=>{const{options:n,...o}=e,r=h({...o,options:{...n,useHistory:!1}}),s=r.id;t.push({elementId:s,model:r.model?.toJSON()||{},createParams:{...e}})}),{createdElements:t}},undo:(e,{createdElements:t})=>{[...t].reverse().forEach(({elementId:e})=>{I({elementId:e,options:{useHistory:!1}})})},redo:(e,{createdElements:t})=>{const n=[];return t.forEach(({createParams:e,model:t})=>{const r=h({containerId:e.containerId,model:t,options:{...e.options,useHistory:!1}}).id,s=o(r);s&&n.push({elementId:r,model:s.model.toJSON(),createParams:e})}),{createdElements:n}}},{title:t,subtitle:r})({elements:e});function v({containerId:e,model:t,options:r}){const s=o(e);if(!s)throw new Error(`Container with ID "${e}" not found`);return(0,n.__privateRunCommandSync)("preview/drop",{container:s,model:t,options:r})}function _({elementId:e,options:t={}}){const r=o(e);if(!r)throw new Error(`Element with ID "${e}" not found`);const s=r.view?._index??0,i=!1!==t.clone?s+1:void 0;return(0,n.__privateRunCommandSync)("document/elements/duplicate",{container:r,options:{at:i,edit:!1,...t}})}const b=({elementIds:e,title:t,subtitle:r=(0,E.__)("Item duplicated","elementor"),onDuplicateElements:s,onRestoreElements:i})=>(0,n.undoable)({do:({elementIds:e})=>(s?.(),{duplicatedElements:e.reduce((e,t)=>{const n=o(t);if(n?.parent){const n=_({elementId:t,options:{useHistory:!1}});e.push({id:n.id,model:n.model.toJSON(),originalElementId:t,modelToRestore:n.model.toJSON(),parentContainerId:n.parent?.id,at:n.view?._index})}return e},[])}),undo:(e,{duplicatedElements:t})=>{i?.(),[...t].reverse().forEach(({id:e})=>{I({elementId:e,options:{useHistory:!1}})})},redo:(e,{duplicatedElements:t})=>(s?.(),{duplicatedElements:t.reduce((e,t)=>{if(t.modelToRestore&&t.parentContainerId){const n=h({containerId:t.parentContainerId,model:t.modelToRestore,options:{useHistory:!1,clone:!1,at:t.at}});e.push({id:n.id,model:n.model.toJSON(),originalElementId:t.originalElementId,modelToRestore:t.modelToRestore,parentContainerId:t.parentContainerId,at:t.at})}return e},[])})},{title:t,subtitle:r})({elementIds:e}),C=()=>{const e=window;return e.elementorCommon?.helpers?.getUniqueId?.()??`el-${Date.now()}-${Math.random().toString(36).substring(2,9)}`};function S(){const e=window;return e.elementor?.documents?.getCurrent?.()?.container??null}function T(){const e=window;return e.elementor?.documents?.getCurrentId?.()??null}var D=window.elementorV2.utils;const x=(0,D.createError)({code:"element_not_found",message:"Element not found."}),$=(0,D.createError)({code:"style_not_found",message:"Style not found."}),k=(0,D.createError)({code:"element_type_not_exists",message:"Element type does not exist."}),j=(0,D.createError)({code:"element_label_not_exists",message:"Element label does not exist."}),O=(0,D.createError)({code:"element_parent_not_found",message:"Element parent not found."}),P=(0,D.createError)({code:"element_index_not_found",message:"Element index not found."});function R(e){e||(e=y()?.[0]?.id);const t=o(e),n=t?.model.get("widgetType")||t?.model.get("elType");if(!n)throw new k({context:{elementId:e}});const r=p()?.[n]?.title;if(!r)throw new j({context:{elementType:n}});return r}const H=e=>{const t=o(e);return t?.model.get("styles")||null};function q(e){const t=e?o(e):S();if(!t)return[];const n=[...t.model.get("elements")??[]].flatMap(e=>q(e.get("id")));return[t,...n]}function U({elementId:e,targetContainerId:t,options:n={}}){const r=o(e),s=o(t);if(!r)throw new Error(`Element with ID "${e}" not found`);if(!s)throw new Error(`Target container with ID "${t}" not found`);const i=r.model.toJSON();return I({elementId:e,options:{...n,useHistory:!1}}),h({containerId:t,model:i,options:{edit:!1,...n,useHistory:!1}})}const z=({moves:e,title:t,subtitle:r=(0,E.__)("Elements moved","elementor"),onMoveElements:s,onRestoreElements:i})=>(0,n.undoable)({do:({moves:e})=>{const t=[];return s?.(),e.forEach(e=>{const{elementId:n}=e,r=o(n);if(!r)throw new Error(`Element with ID "${n}" not found`);const s={elementId:n,originalContainerId:r.parent?.id||"",originalIndex:r.parent?.children?.indexOf(r)??-1},i=U({...e,options:{...e.options,useHistory:!1}});t.push({elementId:n,originalPosition:s,move:e,element:i})}),{movedElements:t}},undo:(e,{movedElements:t})=>{i?.(),[...t].reverse().forEach(({originalPosition:e})=>{const{elementId:t,originalContainerId:n,originalIndex:o}=e;U({elementId:t,targetContainerId:n,options:{useHistory:!1,at:o>=0?o:void 0}})})},redo:(e,{movedElements:t})=>{const n=[];return s?.(),t.forEach(({move:e,originalPosition:t})=>{const o=U({...e,options:{...e.options,useHistory:!1}});n.push({elementId:e.elementId,originalPosition:t,move:e,element:o})}),{movedElements:n}}},{title:t,subtitle:r})({moves:e}),M=({elementIds:e,title:t,subtitle:r=(0,E.__)("Item removed","elementor"),onRemoveElements:s,onRestoreElements:i})=>(0,n.undoable)({do:({elementIds:e})=>{const t=[];return e.forEach(e=>{const n=o(e);if(n){const o=n.model.toJSON(),r=n.parent,s=n.view?._index??0;t.push({elementId:e,model:o,parent:r??null,at:s})}}),s?.(),e.forEach(e=>{I({elementId:e,options:{useHistory:!1}})}),{elementIds:e,removedElements:t}},undo:(e,{removedElements:t})=>{i?.(),[...t].reverse().forEach(({model:e,parent:t,at:n})=>{t&&e&&h({containerId:t.id,model:e,options:{useHistory:!1,at:n}})})},redo:(e,{elementIds:t,removedElements:n})=>(s?.(),t.forEach(e=>{I({elementId:e,options:{useHistory:!1}})}),{elementIds:t,removedElements:n})},{title:t,subtitle:r})({elementIds:e}),L=({currentElement:e,newElement:t,withHistory:n=!0})=>{const{containerId:r,index:s}=function(e,t){let n;const r=o(e.id);if(!r)throw new x({context:{elementId:e.id}});const s=r.parent;if(!s)throw new O({context:{elementId:e.id}});const i=r.view?._index??0;if(void 0===i||-1===i)throw new P({context:{elementId:e.id}});return n={containerId:s.id,index:i},"document"===s.id&&"widget"===t.elType&&(n=function(e,t){return{containerId:h({containerId:e,model:{elType:"container"},options:{at:t,useHistory:!1}}).id,index:0}}(s.id,i)),n}(e,t);h({containerId:r,model:t,options:{at:s,useHistory:n}}),I({elementId:e.id,options:{useHistory:n}})},A=({elementId:e,settings:t})=>{const r=o(e);if(!r)throw new Error(`Element with id ${e} not found`);const s=r.model.get("editor_settings")??{};r.model.set("editor_settings",{...s,...t}),(0,n.__privateRunCommandSync)("document/save/set-is-modified",{status:true},{internal:!0})},N=({id:e,props:t,withHistory:r=!0})=>{const s={container:o(e),settings:{...t}};r?(0,n.__privateRunCommandSync)("document/elements/settings",s):(0,n.__privateRunCommandSync)("document/elements/set-settings",s,{internal:!0})};function V(e){const t=J(e);if(t)return{shouldRestrict:!0,reason:"descendant",elementId:t};const n=G(e);return n?{shouldRestrict:!0,reason:"ancestor",elementId:n}:{shouldRestrict:!1}}function J(e){const t=F(e);if(!t)return null;for(const n of Array.from(t.querySelectorAll("a"))){const t=Y(n);if(t!==e)return t}return null}function G(e){const t=F(e);if(!t||null===t.parentElement)return null;const n=t.parentElement.closest("a");return n?Y(n):null}function B(e){const t=F(e);return!!t&&(!!K(t.tagName)||W(t))}function W(e){for(const t of e.children)if(!Q(t)){if(K(t.tagName))return!0;if(W(t))return!0}return!1}function Y(e){return e.closest("[data-id]")?.dataset.id||null}function F(e){try{return o(e)?.view?.el||null}catch{return null}}function K(e){return"a"===e.toLowerCase()}function Q(e){return e.hasAttribute("data-id")}const X="elementor/editor-v2/editor-elements/style",Z=[(0,n.commandEndEvent)("document/elements/create"),(0,n.commandEndEvent)("document/elements/duplicate"),(0,n.commandEndEvent)("document/elements/import"),(0,n.commandEndEvent)("document/elements/paste"),(0,n.windowEvent)(X)];var ee=window.elementorV2.editorProps,te=window.elementorV2.editorStyles;function ne(e,t){const r=o(e);if(!r)throw new x({context:{elementId:e}});const s=Object.keys(r.model.get("styles")??{}),i=function(e,t){const n=structuredClone(e.model.get("styles"))??{},o=Object.entries(t(n)).map(([e,t])=>(t.variants=function(e){return e.variants.filter(({props:e,custom_css:t})=>Object.keys(e).length>0||t?.raw)}(t),[e,t])).filter(([,e])=>!function(e){return 0===e.variants.length}(e)),r=Object.fromEntries(o);return e.model.set("styles",r),r}(r,t);return function(e,{oldIds:t,newIds:n}){const o=t.filter(e=>!n.includes(e)),r=structuredClone(function(e){return Object.entries(e.settings.toJSON()).filter(e=>{const[,t]=e;return ee.classesPropTypeUtil.isValid(t)})}(e));r.forEach(([,e])=>{e.value=e.value.filter(e=>!o.includes(e))}),N({id:e.id,props:Object.fromEntries(r),withHistory:!1})}(r,{oldIds:s,newIds:Object.keys(i)}),window.dispatchEvent(new CustomEvent(X)),(0,n.__privateRunCommandSync)("document/save/set-is-modified",{status:!0},{internal:!0}),i}function oe({styleId:e,elementId:t,classesProp:n,label:o,meta:r,props:s,custom_css:i=null,additionalVariants:l=[]}){let c=e;return ne(t,e=>{c??=(0,te.generateId)(`e-${t}-`,Object.keys(e));const d=[{meta:r,props:s,custom_css:i},...l];return e[c]={id:c,label:o,type:"class",variants:d},function(e,t,n){const o=a(e,t),r=ee.classesPropTypeUtil.create(e=>[...e??[],n],{base:o});N({id:e,props:{[t]:r},withHistory:!1})}(t,n,c),e}),c}function re(e){return!e?.styleId&&!e?.provider}function se(e,t){ne(e,e=>(delete e[t],e))}function ie(e){ne(e.elementId,t=>{const n=t[e.styleId];if(!n)throw new $({context:{styleId:e.styleId}});const o=(0,te.getVariantByMeta)(n,e.meta),r=("custom_css"in e?e.custom_css:o?.custom_css)??null;return o?(o.props=(0,ee.mergeProps)(o.props,e.props),o.custom_css=r?.raw?r:null):n.variants.push({meta:e.meta,props:e.props,custom_css:r}),t})}var le=window.React;function ae(e){const t=o(e),n=t?.model?.get("interactions");return"string"==typeof n?JSON.parse(n):n}const ce=e=>{const[t,o]=(0,le.useState)(()=>ae(e)??{version:1,items:[]});return(0,n.__privateUseListenTo)((0,n.windowEvent)("elementor/element/update_interactions"),()=>{const t=ae(e);o(t??{version:1,items:[]})},[e]),t},de=({elementId:e,interactions:t})=>{const r=o(e);if(!r)throw new Error(`Element with id ${e} not found`);r.model.set("interactions",t),window.dispatchEvent(new CustomEvent("elementor/element/update_interactions")),(0,n.__privateRunCommandSync)("document/save/set-is-modified",{status:true},{internal:!0})},me=(e,t)=>{window.top?.dispatchEvent(new CustomEvent("atomic/play_interactions",{detail:{elementId:e,animationId:t}}))};var ue=window.elementorV2.editorMcp,pe=window.elementorV2.schema;const fe=["widescreen","desktop","laptop","tablet_extra","tablet","mobile_extra","mobile"];function ye(e){return null===e?null:fe.includes(e)?e:"desktop"}const we={action:pe.z.enum(["get-element-schema","get-element-props","create-element","update-props","create-style","get-styles","update-styles","delete-style","delete","duplicate","move","select","deselect","deselect-all","get-selected","list-available-types"]).describe("The element operation to perform."),elementId:pe.z.string().optional().describe("The ID of the target element"),elementIds:pe.z.array(pe.z.string()).optional().describe("Array of element IDs for multi-element operations"),elementType:pe.z.string().optional().describe("The type of element to create. Must be an atomic element type (required for create-element and get-element-schema actions)"),props:pe.z.record(pe.z.any()).optional().describe("Props object for creating or updating an element. Must match the element type's propsSchema."),containerId:pe.z.string().optional().describe('Parent container ID for element creation or move operations. Use "document" if parent is the document root.'),targetContainerId:pe.z.string().optional().describe("Target container ID for move operations"),styles:pe.z.record(pe.z.any()).optional().describe("Styles object for creating or updating element styles. Must match the element type's stylesSchema."),styleId:pe.z.string().optional().describe("Style definition ID for style operations. If not provided, the first available style will be used (for update/delete)."),breakpoint:pe.z.string().optional().describe('Breakpoint for style operations (e.g., "desktop", "tablet", "mobile"). Defaults to "desktop".'),state:pe.z.string().optional().describe('State for style operations (e.g., "hover", "active", or null). Defaults to null.'),classesProp:pe.z.string().optional().describe('Classes property name for create-style action. Defaults to "classes".'),label:pe.z.string().optional().describe('Label for create-style action. Defaults to "local".'),custom_css:pe.z.object({raw:pe.z.string()}).optional().describe("Custom CSS object with raw CSS string for create-style action.")};function he(){const{setMCPDescription:e}=(0,ue.getMCPByDomain)("elements");e("Tools for managing atomic elements in Elementor v4 editor"),(0,ue.getMCPByDomain)("elements").addTool({name:"elements",schema:we,description:'This tool manages individual Elementor atomic elements (v4).\n\n**When to use this tool:**\n\nUse this tool to create, update, delete, duplicate, move, and select individual atomic elements, as well as retrieve their schemas and current props.\n\n**Available actions:**\n\n- `list-available-types`: List all available atomic element types.\n- `get-element-schema`: Get the propsSchema and controls for an element type. Required before creating elements of a new type.\n- `get-element-props`: Get the current prop values for an existing element.\n- `create-element`: Create a new atomic element with specified props and styles (Important to match props and styles by the schema, use get-element-schema to get the schema first).\n- `update-props`: Update props for an existing element.\n- `create-style`: Create a new style definition for an element.\n- `get-styles`: Get all style definitions for an element.\n- `update-styles`: Update styles for an existing element\'s style variant.\n- `delete-style`: Delete a style definition from an element.\n- `delete`: Delete an element.\n- `duplicate`: Duplicate an existing element.\n- `move`: Move an element to a different container.\n- `select`: Select one or more elements.\n- `deselect`: Deselect a specific element.\n- `deselect-all`: Deselect all selected elements.\n- `get-selected`: Get currently selected elements.\n\n**Constraints:**\n\n- Before creating an element of a certain type for the first time, you MUST call `get-element-schema` to retrieve its schema.\n- You can only update props for existing elements.\n- All props must match the element type\'s propsSchema keys.\n- Element types must be atomic (have atomic_controls and atomic_props_schema).\n- Container IDs must exist and be valid before create/move operations.\n\n** Must do with every operation **\nAs of the user can ask in multiple ways the creation of the element, you need to first get the list of available types with "list-available-types" action.\nAfter getting it, convert to the most relevant type that the user requested and if this is not clear, request for user input.\nAfter finding out the proper type, get the schema for it with "get-element-schema" action.\n\n** Styles and Settings propUtils **\nGetting the schema is important as it introduces the propUtils for the styles and settings.\nYou can use the propUtils to create, update, delete, and get the values of the styles and settings.\nSettings exists in the result of the get-element-schema action -> propsSchema.\nStyles exists in the result of the get-element-schema action -> stylesSchema.\n\n**Examples:**\n\nGet schema for heading element:\n```json\n{ "action": "get-element-schema", "elementType": "e-heading" }\n```\n\nCreate a heading element:\n```json\n{ "action": "create-element", "elementType": "e-heading", "containerId": "document", "props": { "title": { $$type: "string", "value": "Hello World" } } }\n```\n\nUpdate element props:\n```json\n{ "action": "update-props", "elementId": "abc123", "props": { "title": "Updated Title" } }\n```\n\nCreate element style:\n```json\n{ "action": "create-style", "elementId": "abc123", "styles": { "padding": "20px", "margin": "10px" } }\n```\n\nGet element styles:\n```json\n{ "action": "get-styles", "elementId": "abc123" }\n```\n\nUpdate element styles:\n```json\n{ "action": "update-styles", "elementId": "abc123", "styles": { "padding": "20px", "margin": "10px" } }\n```\n\nDelete element style:\n```json\n{ "action": "delete-style", "elementId": "abc123", "styleId": "style-id-123" }\n```',handler:async e=>function(e){try{switch(e.action){case"get-element-schema":if(!e.elementType)throw new Error("elementType is required for get-element-schema action");return function(e){const t=f(e);if(!t)throw new Error(`Element type "${e}" not found or is not atomic`);return{...t,stylesSchema:(0,te.getStylesSchema)()}}(e.elementType);case"get-element-props":if(!e.elementId)throw new Error("elementId is required for get-element-props action");return function(e){const t=o(e);if(!t)throw new Error(`Element with ID "${e}" not found`);const n=t.model.get("widgetType")||t.model.get("elType");if(!n)throw new Error(`Element with ID "${e}" has no type`);const r=f(n);if(!r)throw new Error(`Element type "${n}" is not atomic`);const s=r.propsSchema,i=Object.keys(s);return c(e,i)}(e.elementId);case"create-element":if(!e.elementType)throw new Error("elementType is required for create-element action");if(!e.containerId)throw new Error("containerId is required for create-element action");return function({elementType:e,containerId:t,props:n={},styles:r}){let s="document"===t?S():o(t);if(!s){if("document"===t)throw new Error("Document container not found. Please ensure the editor is initialized.");throw new Error(`Container with ID "${t}" not found`)}const i=s.model.get("elType");if("document"===s.id||"document"===i){const e={elType:"e-div-block"},t=h({containerId:s.id,model:e,options:{useHistory:!0}});if(oe({elementId:t.id,classesProp:"classes",label:"local",meta:{breakpoint:"desktop",state:null},props:{display:{$$type:"string",value:"flex"},"flex-direction":{$$type:"string",value:"row"},"flex-wrap":{$$type:"string",value:"wrap"}}}),s=o(t.id),!s)throw new Error("Failed to create container for widget. Cannot create widgets directly in the document.")}const l=s.id;if(!f(e))throw new Error(`Element type "${e}" not found or is not atomic`);const a=h({containerId:l,model:{widgetType:e,elType:"widget",settings:n},options:{useHistory:!0}});return r&&oe({elementId:a.id,classesProp:"classes",label:"local",meta:{breakpoint:"desktop",state:null},props:r}),{elementId:a.id,type:e}}({elementType:e.elementType,containerId:e.containerId,props:e.props,styles:e.styles});case"update-props":if(!e.elementId)throw new Error("elementId is required for update-props action");if(!e.props)throw new Error("props is required for update-props action");return function({elementId:e,props:t}){if(!o(e))throw new Error(`Element with ID "${e}" not found`);return N({id:e,props:t,withHistory:!0}),{success:!0}}({elementId:e.elementId,props:e.props});case"create-style":if(!e.elementId)throw new Error("elementId is required for create-style action");if(!e.styles)throw new Error("styles is required for create-style action");return function({elementId:e,styleId:t,classesProp:n="classes",label:o="local",styles:r,breakpoint:s="desktop",state:i=null,customCss:l=null}){return{styleId:oe({styleId:t,elementId:e,classesProp:n,label:o,meta:{breakpoint:ye(s),state:null==i?null:i},props:r,custom_css:l})}}({elementId:e.elementId,styleId:e.styleId,classesProp:e.classesProp,label:e.label,styles:e.styles,breakpoint:e.breakpoint,state:e.state,customCss:e.custom_css});case"get-styles":if(!e.elementId)throw new Error("elementId is required for get-styles action");return function(e){const t=H(e);return t?Object.fromEntries(Object.entries(t).map(([e,t])=>[e,{id:t.id,label:t.label,type:t.type,variants:t.variants.map(e=>({meta:e.meta,props:e.props,custom_css:e.custom_css}))}])):null}(e.elementId);case"update-styles":if(!e.elementId)throw new Error("elementId is required for update-styles action");if(!e.styles)throw new Error("styles is required for update-styles action");return function({elementId:e,styleId:t,styles:n,breakpoint:o="desktop",state:r=null}){const s=ye(o),i=null==r?null:r,l=H(e);if(!l)throw new Error(`Element with ID "${e}" has no styles. Create a style first.`);const a=t||Object.keys(l)[0];if(!a)throw new Error(`Element with ID "${e}" has no styles. Create a style first.`);return ie({elementId:e,styleId:a,meta:{breakpoint:s,state:i},props:n}),{success:!0}}({elementId:e.elementId,styleId:e.styleId,styles:e.styles,breakpoint:e.breakpoint,state:e.state});case"delete-style":if(!e.elementId)throw new Error("elementId is required for delete-style action");return function({elementId:e,styleId:t}){const n=H(e);if(!n)throw new Error(`Element with ID "${e}" has no styles.`);const o=t||Object.keys(n)[0];if(!o)throw new Error(`Element with ID "${e}" has no styles to delete.`);return se(e,o),{success:!0}}({elementId:e.elementId,styleId:e.styleId});case"delete":if(!e.elementId)throw new Error("elementId is required for delete action");return function(e){if(!o(e))throw new Error(`Element with ID "${e}" not found`);return I({elementId:e,options:{useHistory:!0}}),{success:!0}}(e.elementId);case"duplicate":if(!e.elementId)throw new Error("elementId is required for duplicate action");return function(e){if(!o(e))throw new Error(`Element with ID "${e}" not found`);const t=_({elementId:e,options:{useHistory:!0}}),n=t.model.get("widgetType")||t.model.get("elType")||"";return{elementId:t.id,type:n}}(e.elementId);case"move":if(!e.elementId)throw new Error("elementId is required for move action");if(!e.targetContainerId)throw new Error("targetContainerId is required for move action");return function({elementId:e,targetContainerId:t}){if(!o(e))throw new Error(`Element with ID "${e}" not found`);if(!o(t))throw new Error(`Target container with ID "${t}" not found`);return U({elementId:e,targetContainerId:t,options:{useHistory:!0}}),{success:!0}}({elementId:e.elementId,targetContainerId:e.targetContainerId});case"select":if(e.elementIds&&e.elementIds.length>0)return e.elementIds.forEach(e=>{o(e)&&r(e)}),{success:!0};if(!e.elementId)throw new Error("elementId or elementIds is required for select action");return function(e){if(!o(e))throw new Error(`Element with ID "${e}" not found`);return r(e),{success:!0}}(e.elementId);case"deselect":if(!e.elementId)throw new Error("elementId is required for deselect action");return function(e){const t=o(e);if(!t)throw new Error(`Element with ID "${e}" not found`);return(0,n.__privateRunCommand)("document/elements/deselect",{container:t}),{success:!0}}(e.elementId);case"deselect-all":return(0,n.__privateRunCommand)("document/elements/deselect-all",{}),{success:!0};case"get-selected":return y();case"list-available-types":return function(){const e=p();if(!e)return[];const t=[];return Object.entries(e).forEach(([e,n])=>{n?.atomic_controls&&n?.atomic_props_schema&&t.push({type:e,title:n.title||e})}),t}();default:throw new Error(`Unknown action: ${e.action}`)}}catch(t){const n=t instanceof Error?t.message:String(t);throw new Error(`Failed to execute action "${e.action}": ${n}`)}}(e)})}(window.elementorV2=window.elementorV2||{}).editorElements=t}(),window.elementorV2.editorElements?.init?.();